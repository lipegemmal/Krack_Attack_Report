\documentclass[12pt]{article}

\usepackage{sbc-template}
\usepackage{graphicx,url}
\usepackage[utf8]{inputenc}
\usepackage[brazil]{babel}
\usepackage[T1]{fontenc}  
\usepackage{indentfirst}

     
\sloppy

\title{Krack Attack \\ An Study}

\author{Felipe A. C. Gemmal\inst{1}, Leonardo A. Basilio\inst{1},\\ João Gabriel S. Fernandes\inst{1}, Arthur C. Sousa\inst{1} }

\address{Instituto de Informática -- Universidade Federal do Goiás(UFG)\\
Alameda Palmeiras, Quadra D,Câmpus Samambaia -- \\ 74690-900 -- Goiânia -- GO -- Brazil 
 \email{\{felipegemmal,leonardobasilio,joaofernandes,arthursousa\}@inf.ufg.br}
}

\begin{document} 

\maketitle

\begin{abstract}
	This paper references the study of Krack Attack and its correlated components with the objective of completing the networks 2 graduation course in UFG.
\end{abstract}

\begin{resumo} 
	Esse artigo referencia o estudo do Krack Attack e seus componentes correlatos com o objetivo de completar o curso de graduação da UFG de redes 2.
\end{resumo}


%Tal pessoa escreve
\section{Introdução}
	O Key Reinstallarion Attacks, apelidado de Krack Attack \cite{1} foi desenvolvido em 2017 por Mathy Vanhoef do grupo de pesquisa DistriNet da universidade belga Ku Leuven. Ele é tipo de ataque ao Wi-Fi, mais precisamente ao protocolo WPA2 (\textit{Wi-Fi Protected Access}) responsável pela segurança da comunicação entre usuário e ponto de acesso. O ataque explora uma vulnerabilidade na etapa de autenticação, mais especificamente na parte de  confirmação do 4-way handshake. Esse consiste na mainpulação dos pacotes trocados entre as partes durante essa etapa, tornando-o um ataque do tipo \textit{Man in The Middle} (MITM).
	Em dispositivos Android e Linux, que usam o cliente de Wi-Fi \textit{wpa\_supplicant}, foi identificada uma situação específica em que a chave da sessão utilizada para criptografar os pacotes pode ser forçada pelo ataque a assumir o valor zero. Isso torna trivial interceptar e manipular o tráfego de dados entre esses dispositivos.

\section{Tecnologias envolvidas}
\subsection{Wi-Fi}
É uma tecnologia criada para redes locais de radio sem fio de dispositivos baseados no padrão IEEE 802.11. Dispositivos que completam com sucesso o teste de certificado de interoperabilidade podem ser chamados de \textit{Wi-Fi Certified} (Certificado em Wi-Fi). O padrão Wi-Fi opera em faixas de frequências que não necessitam de licença para instalação e/ou operação. Dispositivos compatíveis podem acessar a internet por meio de uma rede local sem fio (WLAN) e um ponto de acesso sem fio. O Wi-Fi geralmente opera nas faixas de 2,4 GHz e 5,8 GHz.

Tais ondas são influenciadas por vários materiais comuns, podendo ser refletidas ou absorvidas por estes, restringindo a distância de conexão do Wi-Fi, mas também diminuem a interferência entre redes, pois como todas as redes sem fio são afetadas por interferências físicas, duas redes terão menos interferências entre si se tiverem estruturas físicas entre elas para refletir suas ondas.

Como o Wi-Fi é uma rede sem fio qualquer pessoa dentro da área com uma interface de controle de uma rede sem fio pode tentar acessar a rede. Por isso, Wi-Fi é mais vulnerável a ataques que redes conectadas por fios.

\subsection{WPA2}
	Também conhecido como IEEE 802.11i, é o sucessor do WPA, substituindo-o desde 2006.
Ele traz melhorias de segurança ao protocolo Wi-Fi, como a utilização do algoritmo de criptografia AES (\textit{Advanced Encryption Standard}) e a introdução de dois novos protocolos: \textit{4-way handshake} e \textit{group key handshake}. Porém devido ao maior custo computacional deste protocolo, alguns equipamentos mais antigos podem ser incompatíveis com o WPA2.

\subsubsection{4-Way Handshake}
O \textit{4-way handshake} utiliza um pequeno grupo de chaves de criptografia para se comunicar de forma segura.
O cliente Wi-Fi e o ponto de acesso enviam mensagens um ao outro, que só podem ser descriptografadas com a chave de sessão PTK (\textit{Pairwise Transient Key}), que é derivada a partir da chave secreta compatilhada PMK (\textit{Pairwise Master Key}), gerada na fase inicial de autenticação do cliente.
	Dessa forma, o \textit{4-way handshake} permite que tanto o cliente quanto o ponto de acesso possam provar um ao outro que eles conhecem a chave PMK, sem nunca divulgá-las, pois, se a descriptografia foi bem sucedida, então há conhecimento da chave.
	
\subsection{Ferramenta}
O autor do ataque publicou um conjunto de \textit{scripts} desenvolvidos na linguagem Python que permitem a verificação da vulnerabilidade de qualquer implementação do 4-way handshake. Estes scripts estão disponíveis em um repositório no GitHub\footnote{https://github.com/vanhoefm/krackattacks-scripts}. Com eles é possível a realização de testes que exploram tanto a reinstalação da PTK quanto da GTK.

Embora o ataque destine-se à interceptação de dados sem a necessidade de se conhecer a PSK da rede, para os testes é necessário que as credenciais sejam conhecidas. Isto porque o cliente alvo deve se conectar ao ponto de acesso que é emulado pelo script. Este ponto de acesso é criado a partir de uma versão modificada do \textit{hostapd}, um serviço de espaço do usuário muito utilizado em sistemas Linux. Este serviço é executado e controlado a partir dos scripts em Python. Pode-se usar tanto um SSID novo quanto um existente. Neste último caso, a rede é criada em um canal diferente do da original e o cliente é forçado a conectar-se à falsa rede.

Além disso, mesmo não disponibilizado no sítio do Krack, existe outro conjunto de \textit{scripts} que são uma prova de conceito para o caso partícular em que o ataque induz uma chave de sessão zerada (\textit{all zero key}). Com ele é possível ter acesso aos pacotes criptografados que trafegam entre o aparelho vulnerável e o atacante, e como a chave é zerada todos os pacotes são facilmente legíveis.

Para a execução do ataque é necessário que o computador que atuará como \textit{Man-In-The-Middle} esteja equipado com duas interfaces Wi-Fi, pois uma servirá como ponto de acesso para o aparelho vulnerável e a outra utilizada para se comunicar com o roteador de acesso original para o qual os pacotes iniciais do \textit{4-way handshake} serão direcionados.


\section{Descrição do problema}
O caso do KrackAttack que será abordado neste artigo diz respeito a um ato malicioso em que um cliente Wi-Fi Android ou Linux é induzido a mudança da chave de criptografia de sessão para zero (\textit{all zero key}). Isso é feito manipulando-se o processo de \textit{4-way-handshake} entre um suplicante e um ponto de acesso, mais especificamente após a terceira mensagem, quando é instalada uma chave, e caso uma resposta de confirmação não seja recebida, a terceira mensagem será reenviada e a chave reinstalada. Foi mostrado que um ataque pode forçar essas reinstalações da chave com uma coleta e repetição da terceira mensagem. 

Caso o ataque ocorra com sucesso, o atacante tem a capacidade de interferir em todas as trocas entre suplicante e ponto de acesso, podendo assim: alterar dados de compras, ter acesso a dados pessoais, informações de cartão de crédito, redirecionar os pedidos de conexão para um sítio malicioso e alterar pacotes recebidos pelo cliente para softwares maliciosos. 

Note que tal ataque não pode resultar na obtenção da senha da rede utilizada, nem das chaves de criptografia usadas para o \textit{handshake}. Também não é possível descriptografar pacotes  criptografados, e como a grande maioria da troca de pacotes em rede é criptografada, é difícil se encontrar numa situação onde esse ataque pode ser usado e obter algum valor significativo como resultado.


\section{Proposta de experimento}
Inicialmente desejava-se implementar o ataque para a excessão \textit{all zero key} utilizando o script de teste como base, e para isso algoritmos e técnicas como \textit{Wi-Fi spoofing} seriam modificados e inseridas para que possa-se acessar os pacotes e servir como um \textit{proxy} para o suplicante. Porém durante os estudos foi encontrado o \textit{script} feito pelo próprio autor que realiza o ataque com a chave zero, então ele será entendido e utilizado no lugar de uma implementação nova.  

O experimento basear-se-á no script de teste de vulnerabilidade que será utilizado em uma pesquisa de vulnerabilidade de marcas, modelos, e versões do sistema operacional de aparelhos celulares ao ataque. O autor menciona que 50\% dos aparelhos eram vulneráveis na época em que a falha foi descoberta, então esse valor será comparado com as taxas atuais.

Além disso, com o objetivo de entender ainda melhor como o ataque se dá, uma execução controlada do script malicioso será feita. 

//Texto antigo

O experimento basear-se-á no \textit{script} mencionado na sessão Ferramentas. Ele será modificado para servir não apenas como um ponto de acesso para testes, mas também como um que dá acesso à internet. Assim, pode-se usar a técnica de \textit{Wi-Fi spoofing} para forçar o acesso do suplicante à Wi-Fi maliciosa e ter acesso aos pacotes criptografados.

Para acessar as informações contidas nos pacotes o \textit{KrackAttack} será lançado logo após o \textit{Wi-Fi spoofing} para consumir o último pacote de confirmação do \textit{4-Way-Handshake} e forçar o recalculo da chave de sessão entre o suplicante e o ponto de acesso malicioso, zerando-a por causa da falha de implementação, assim os pacotes poderão ser descriptografados.


\section{Relatório de experimento}
Para as estatísticas entrevistas foram realizadas

Algumas etapas foram realizadas para cumprir o experimento. Co



//Texto antigo

Algumas etapas foram realizadas para cumprir o experimento. Com o script mencionado compilado e executando obtivemos um aparelho celular com sistema operacional vulnerável ao ataque. Utilizando um roteador Wi-Fi comum e o instalamos no laboratorio com um dos cabos de ethernet disponíveis e também obtivemos um dispositivo de Wi-Fi que pode ser instalado via USB, assim pudemos ter dois hardwares para Wi-Fi em um mesmo computador, possibilitando que um deles imite a rede alvo e um deles se conecte a tal rede. Colocamos o computador utilizado entre o celular vulneravel e o moden da rede alvo para propriamente agir como "man in the middle", e obtivemos resultados negativos, o ataque não estava funcionando. Após algumas tentativas visitamos novamente as fontes de informações sobre o ataque e vimos que distanciar os dois dispositivos de Wi-Fi um do outro poderia ajudar, então com a ajuda de um cabo com uma ponta USB macho e uma ponta USB femea, conseguimos distanciar os dispositivos. Após mas alguns testes encontramos problemas no sentido em que o computador utilizado não estava enviando a terceira chave. Aprofundando mais nesse problema, percebemos que ele pode estar relacionado a uma socket especifica ja estar em uso. Após solucinar esse problema

\section{Execução final}
Como a construção do ataque baseado no \textit{script} de teste de vulnerabilidade provava-se uma tarefa complexa, foram buscados mais exemplos e durante a procura encontrou-se um repositório pouco divulgado do próprio autor do Krack que disponibilizava o projeto completo e funcional.

Então o novo experimento será baseado em uma nova versão das estatísticas de vulnerabilidade apresentadas quando o ataque foi descoberto (na qual fala que 60\% dos aparelhos são vulneráveis) e com uma exemplificação do ataque utilizando o algoritmo disponibilizado pelo Mathy Vanhoef.








%\textit{arp spoofing}


%\section{Conclusão}


%\begin{abstract}
%  This meta-paper describes the style to be used in articles and short papers
%  for SBC conferences. For papers in English, you should add just an abstract
%  while for the papers in Portuguese, we also ask for an abstract in
%  Portuguese (``resumo''). In both cases, abstracts should not have more than
%  10 lines and must be in the first page of the paper.
%\end{abstract}
     
%
%
%\section{General Information}
%
%All full papers and posters (short papers) submitted to some SBC conference,
%including any supporting documents, should be written in English or in
%Portuguese. The format paper should be A4 with single column, 3.5 cm for upper
%margin, 2.5 cm for bottom margin and 3.0 cm for lateral margins, without
%headers or footers. The main font must be Times, 12 point nominal size, with 6
%points of space before each paragraph. Page numbers must be suppressed.
%
%Full papers must respect the page limits defined by the conference.
%Conferences that publish just abstracts ask for \textbf{one}-page texts.
%
%\section{First Page} \label{sec:firstpage}
%
%The first page must display the paper title, the name and address of the
%authors, the abstract in English and ``resumo'' in Portuguese (``resumos'' are
%required only for papers written in Portuguese). The title must be centered
%over the whole page, in 16 point boldface font and with 12 points of space
%before itself. Author names must be centered in 12 point font, bold, all of
%them disposed in the same line, separated by commas and with 12 points of
%space after the title. Addresses must be centered in 12 point font, also with
%12 points of space after the authors' names. E-mail addresses should be
%written using font Courier New, 10 point nominal size, with 6 points of space
%before and 6 points of space after.
%
%The abstract and ``resumo'' (if is the case) must be in 12 point Times font,
%indented 0.8cm on both sides. The word \textbf{Abstract} and \textbf{Resumo},
%should be written in boldface and must precede the text.
%
%\section{CD-ROMs and Printed Proceedings}
%
%In some conferences, the papers are published on CD-ROM while only the
%abstract is published in the printed Proceedings. In this case, authors are
%invited to prepare two final versions of the paper. One, complete, to be
%published on the CD and the other, containing only the first page, with
%abstract and ``resumo'' (for papers in Portuguese).
%
%\section{Sections and Paragraphs}
%
%Section titles must be in boldface, 13pt, flush left. There should be an extra
%12 pt of space before each title. Section numbering is optional. The first
%paragraph of each section should not be indented, while the first lines of
%subsequent paragraphs should be indented by 1.27 cm.
%
%\subsection{Subsections}
%
%The subsection titles must be in boldface, 12pt, flush left.
%
%\section{Figures and Captions}\label{sec:figs}
%
%
%Figure and table captions should be centered if less than one line
%(Figure~\ref{fig:exampleFig1}), otherwise justified and indented by 0.8cm on
%both margins, as shown in Figure~\ref{fig:exampleFig2}. The caption font must
%be Helvetica, 10 point, boldface, with 6 points of space before and after each
%caption.
%
%\begin{figure}[ht]
%\centering
%\includegraphics[width=.5\textwidth]{fig1.jpg}
%\caption{A typical figure}
%\label{fig:exampleFig1}
%\end{figure}
%
%\begin{figure}[ht]
%\centering
%\includegraphics[width=.3\textwidth]{fig2.jpg}
%\caption{This figure is an example of a figure caption taking more than one
%  line and justified considering margins mentioned in Section~\ref{sec:figs}.}
%\label{fig:exampleFig2}
%\end{figure}
%
%In tables, try to avoid the use of colored or shaded backgrounds, and avoid
%thick, doubled, or unnecessary framing lines. When reporting empirical data,
%do not use more decimal digits than warranted by their precision and
%reproducibility. Table caption must be placed before the table (see Table 1)
%and the font used must also be Helvetica, 10 point, boldface, with 6 points of
%space before and after each caption.
%
%\begin{table}[ht]
%\centering
%\caption{Variables to be considered on the evaluation of interaction
%  techniques}
%\label{tab:exTable1}
%\includegraphics[width=.7\textwidth]{table.jpg}
%\end{table}
%
%\section{Images}
%
%All images and illustrations should be in black-and-white, or gray tones,
%excepting for the papers that will be electronically available (on CD-ROMs,
%internet, etc.). The image resolution on paper should be about 600 dpi for
%black-and-white images, and 150-300 dpi for grayscale images.  Do not include
%images with excessive resolution, as they may take hours to print, without any
%visible difference in the result. 
%

\section{Referências}

%
%Bibliographic references must be unambiguous and uniform.  We recommend giving
%the author names references in brackets, e.g. \cite{knuth:84},
%\cite{boulic:91}, and \cite{smith:99}.
%
%The references must be listed using 12 point font size, with 6 points of space
%before each reference. The first line of each reference should not be
%indented, while the subsequent should be indented by 0.5 cm.
%
\bibliographystyle{sbc}
\bibliography{sbc-template}

\end{document}
